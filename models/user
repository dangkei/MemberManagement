var mysql = require("./db_mysql");

function User(user){
    this.username = user.username;
    this.password = user.password;
    this.Email = user.Email;
    this.phone = user.phone;
    this.QQ = user.QQ;
    this.Company = user.Company;

}

module.exports = User;

User.prototype.save = function(){
    mysql.connect();
    var username = this.username,
        password = this.password,
        Email = this.Email,
        phone = this.phone,
        QQ = this.QQ,
        Company = this.Company;
    var insertSQL = 'insert into t_user (username,password,Email,phone,QQ,Company) values("'+
        username+'","'+
        password+'","'+
        Email+'","'+
        phone+'","'+
        QQ+'","'+
        Company+
        '");';
    mysql.query(insertSQL,function(err,res){
        if(err){
            console.log(err);
        }
        console.log("Save User ==>");
        console.log(res);
    });

    mysql.end();
    return true;
};

User.get = function(username,callback){
    mysql.connect();
    var selectSQL = 'select * from t_user where username = "'+
            username + '";';

    mysql.query(selectSQL,function(err,res){
        if(err){
            console.log(err);
        }
        callback(null,res[0]);
        return mysql.end();
    });


};