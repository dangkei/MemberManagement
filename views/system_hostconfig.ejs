<%- include header.ejs %>

<div class="table-responsive" style="margin-top: 50px">
  <form class="form" action="/system/initdatabase" method="post">
	<table class="table table-hover table-bordered">
	  <thead>
	  <tr>
		<th colspan="3" class="text-center h4">请填写需要连接的主机</th>
	  </tr>
	  </thead>
	  <tbody>
	  <% if(!settings){ %>
	  <tr class="form-group">
		<td class="modal-title danger control-label col-sm-1">cookSecret:</td>
		<td colspan="2"><input class="form-control" id="cookSecret" name="cookSecret" value="usermanagement"></td>
	  </tr>
	  <tr class="form-group">
		<td class="modal-title danger control-label">host:</td>
		<td><input class="form-control" id="host" name="host" value="127.0.0.1"></td>
		<td><input class="form-control" id="port" name="port" value="3306"></td>
	  </tr>
	  <tr class="form-group">
		<td class="modal-title danger control-label">user:</td>
		<td colspan="2"><input class="form-control" id="user" name="user" value="root"></td>
	  </tr>
	  <tr class="form-group">
		<td class="modal-title danger control-label">password:</td>
		<td colspan="2"><input type="password" class="form-control" id="password" name="password"></td>
	  </tr>
	  <tr class="form-group">
		<td class="modal-title danger control-label">database:</td>
		<td colspan="2"><input class="form-control" id="database" name="database" value="nodejs"></td>
	  </tr>
	  <% }else{ %>
	  <tr class="form-group">
		<td class="modal-title danger control-label">cookieSecret:</td>
		<td colspan="2"><input class="form-control" id="cookieSecret" name="cookieSecret"
							   value="<%= settings.cookieSecret %>"></td>
	  </tr>
	  <tr class="form-group">
		<td class="modal-title danger control-label">host:</td>
		<td><input class="form-control" id="host" name="host" value="<%= settings.host %>"></td>
		<td><input class="form-control" id="port" name="port" value="<%= settings.port %>"></td>
	  </tr>
	  <tr class="form-group">
		<td class="modal-title danger control-label">user:</td>
		<td colspan="2"><input class="form-control" id="user" name="user" value="<%= settings.user %>"></td>
	  </tr>
	  <tr class="form-group">
		<td class="modal-title danger control-label">password:</td>
		<td colspan="2"><input type="password" class="form-control" id="password" name="password"
							   value="<%= settings.password %>"></td>
	  </tr>
	  <tr class="form-group">
		<td class="modal-title danger control-label">database:</td>
		<td colspan="2"><input class="form-control" id="database" name="database" value="<%= settings.database %>"></td>
	  </tr>
	  <% } %>
	  <tr>
		<td></td>
		<td>
		  <button class="btn btn-primary" type="submit" id="btnsubmit">确认</button>
		</td>
		<td></td>
	  </tr>
	  <tr>
		<td colspan="3"><p class="text-warning">
			*确认后将开始保存数据库信息.请确认数据库名称和密码.如果数据库不存在将创建新的数据库.
		  </p></td>
	  </tr>
	  <% if(typeof error != 'undefinded' && error != null){ %>
	  <tr>
		<td colspan="3">
		  <p class="alert alert-danger"><%= error %></p>
		</td>
	  </tr>
	  <% } %>
	  </tbody>
	</table>
  </form>
</div>

<%- include footer.ejs %>